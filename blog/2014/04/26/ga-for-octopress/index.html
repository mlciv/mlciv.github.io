<!doctype html><html class="no-js" lang="en"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>Google Analytics for Octopress</title><link rel="stylesheet" type="text/css" href="https://mlciv.com/assets/css/styles_feeling_responsive.css" /> <script src="https://mlciv.com/assets/js/modernizr.min.js"></script> <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script> <script> if (location.protocol != 'https:'){ location.href = 'https:' + window.location.href.substring(window.location.protocol.length); } WebFont.load({ google: { families: [ 'Lato:400,700,400italic:latin', 'Volkhov::latin' ] } }); </script> <script language="JavaScript" type="text/javascript"> function toggleDiv(element){ if(document.getElementById(element).style.display == 'none') document.getElementById(element).style.display = 'block'; else document.getElementById(element).style.display = 'none'; } </script> <noscript><link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic|Volkhov' rel='stylesheet' type='text/css' /> </noscript><meta name="description" content="Keep a student mindset, and learn for/with/from machines. -- machine learning civilization" /><link rel="icon" sizes="32x32" href="https://mlciv.com/assets/img/favicon-32x32.png" /><link rel="icon" sizes="192x192" href="https://mlciv.com/assets/img/touch-icon-192x192.png" /><link rel="apple-touch-icon-precomposed" sizes="180x180" href="https://mlciv.com/assets/img/apple-touch-icon-180x180-precomposed.png" /><link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://mlciv.com/assets/img/apple-touch-icon-152x152-precomposed.png" /><link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://mlciv.com/assets/img/apple-touch-icon-144x144-precomposed.png" /><link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://mlciv.com/assets/img/apple-touch-icon-120x120-precomposed.png" /><link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://mlciv.com/assets/img/apple-touch-icon-114x114-precomposed.png" /><link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://mlciv.com/assets/img/apple-touch-icon-76x76-precomposed.png" /><link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://mlciv.com/assets/img/apple-touch-icon-72x72-precomposed.png" /><link rel="apple-touch-icon-precomposed" href="https://mlciv.com/assets/img/apple-touch-icon-precomposed.png" /><meta name="msapplication-TileImage" content="https://mlciv.com/assets/img/msapplication_tileimage.png" /><meta name="msapplication-TileColor" content="#fabb00" /> <meta property="og:locale" content="en_EN" /><meta property="og:title" content="Google Analytics for Octopress" /><meta property="og:description" content="Keep a student mindset, and learn for/with/from machines. -- machine learning civilization" /><meta property="og:url" content="https://mlciv.com//blog/2014/04/26/ga-for-octopress/" /><meta property="og:site_name" content="MLCIV" /><link type="text/plain" rel="author" href="https://mlciv.com/humans.txt" /><body id="top-of-page" class="post"><div id="navigation" class="sticky"><nav class="top-bar" role="navigation" data-topbar><ul class="title-area"><li class="name"><h1 class="show-for-small-only"><a href="https://mlciv.com" class="icon-tree"> MLCIV</a></h1><li class="toggle-topbar menu-icon"><a href="#"><span>Navigation</span></a></ul><section class="top-bar-section"><ul class="right"></ul><ul class="left"><li><a href="https://mlciv.com/">Home</a><li class="divider"></ul></section></nav></div><div id="masthead-no-image-header"><div class="row"><div class="small-12 columns"> <a id="logo" href="https://mlciv.com" title="MLCIV – Machine Learning Civilization"> <img src="https://mlciv.com/assets/img/logo.png" alt="MLCIV – Machine Learning Civilization"> </a></div></div></div><div class="row t30"><div class="medium-8 columns medium-offset-2 end"><article itemscope itemtype="http://schema.org/Article"><header> <span itemprop="name"><h1>Google Analytics for Octopress</h1></span></header><span itemprop="articleSection"><p>Using Octopress as a blog framework is a funny experience, and how to display some blog stats such as pv is another interesting and challenge task for octopress post are only static html pages which means you cannot easily record the count by githubpages.<p>Google Analytics Service(GA) is a nature choice for web site analysis and there is already an Octopress plugin called jekyll-ga, which can sort blog posts by certain metrics of GA and another improved plugin called octopress-page-view. After trying these plugins, I jogged down some understandings and steps for how to using GA for Octopress as following: <hr /><h1 id="1-what-is-google-analytics">1. What is Google Analytics</h1><hr /><p>Do you know what people do when they visit your website or web app? Or how much the site contributes to your bottom line? Google Analytics keeps track and makes it easy for you to learn precisely what’s happening. Google Analytics shows you how to track different market segments and analyze conversion rates, and reveals advanced techniques such as marketing-campaign tracking, a valuable feature that most people overlook.<p>Accessing https://www.google.com/intl/zh/analytics/ and Using it is the best way to taste GA. An expert and hands-on book for GA can endow you a systematic view. The link on Amazon is the following. http://www.amazon.cn/mn/detailApp/ref=asc_df_0596158009956339/?asin=0596158009&amp;tag=douban-23&amp;creative=2384&amp;creativeASIN=0596158009&amp;linkCode=df0<hr /><h1 id="2-how-to-track-your-site-with-google-analytics">2. How to track your site with Google Analytics</h1><hr /><p>The above reference can offer your more details about GA. Here I just list some sensible cognition for understanding how Google Analytics works and how to set up GA service for your site.<h2 id="tracking-id">Tracking ID</h2><p>When you login to the GA console web page https://www.google.com/analytics/web/, you will asked to create a new project to tracking your site. First, a tracking ID and a segment of code will be generated. The tracking ID is the unique ID for your site, and it has the following funtions:<ol><li><p>Notify the GA service when your site being accessed The generated code need to emebeded into your page template, so that the script will be called to notify GA with the tracking ID when someone is viewing your page. This just like the script is telling the GA,”Hello GA,someone in Japan is using the Chrome to view your client’s (TrackingID) page, please note down this.” So when GA receive this notice, it will record this viewing behavior in some database, and there comes a data design problem? How to organize the data?<li><p>TrackingID is the tableID You can imagine there is a data table used for these tracking record, and so a unique tracking ID is mapped into a unqiue table. Simplely speaking, the record will stored into a table called “TrackingID” and the data in this table will be analyzed and generated into a report including some graph displaying in the GA console. Some times you also need to fectch the GA data for other purposes using Google Analytics API but not only appretiate the generated report in the GA console.</ol><h2 id="google-analytic-api">Google Analytic API</h2><p>With the generated trakcing ID, a table is created and tracking records are filled in. Then how to get these data is a coming issue the site analyzer will concern about. Of course, the greate google offer the Google Analytic API. More details about how to program with the API can be found here. https://developers.google.com/analytics/devguides/reporting/<p>More significantly, the lovely google offer a Google Analytic API service in the Google Developers Console: https://console.developers.google.com/project You can create a project and active the GA API service. The project is a proxy for the following funtions:<ol><li><p>Authorize the clients who can send GA API request<br /> The user should create a new client key in this GA API proxy and grant permissions for newly client. The generated client key contains <strong>a GA service account</strong> which should also be granted previleges in the GA console and <strong>a private certificate</strong> required by the client.<li><p>Forward the request to GA and return the response data to clients Now the client use the authorized GA service account and the private key to send request. The GA API service will forward the request from the client to the GA server to fectch ths data with tracking ID.</ol><hr /><h1 id="3-get-pageview-data-for-octopress">3. Get PageView Data For Octopress</h1><hr /><h2 id="step-1-installation">Step 1. Installation</h2><p>see more. https://github.com/developmentseed/jekyll-ga<h2 id="step-2-set-up-a-service-account-for-the-ga-api">Step 2. Set up a service account for the GA API</h2><ul><li><p>Turn on the Analytics API and accept the terms of service Go to API Access on the left sidebar menu, create a new oauth 2.0 client ID, give your project a name, and click next.<li>Select Application type: Service account, and click Create client ID<li>Note the private key’s password. It will probably be notasecret unless Google changes something. You’ll need to enter this value in your configuration settings.<li>Download the private key. Save this file because you can only download it once. Copy it to the root of your Jekyll repository. Safety tip: To protect this file, add its file name to your .gitignore file and to the exclude list in your _config.yml file<li>Note the Email address for the Service account. You’ll need this for your configuration settings and in the next step.<li>Log into Google Analytics and add the service account email address as a user of your Google Analytics profile: From a report page, Admin &gt; User Management &gt; Add permission for &gt;</ul><h2 id="step-3-configure-page-view-plugin">Step 3. Configure Page-View Plugin</h2><p>see more. http://jhshi.me/2013/11/10/page-view-plugin-for-octopress/<p> <code> #octopress-page-view &lt;/br&gt; page-view: &lt;/br&gt; service_account_email: #XXXXXX@developer.gserviceaccount.com &lt;/br&gt; key_file: privatekey.p12 #service account private key file &lt;/br&gt; key_file: privatekey.p12 #service account private key file &lt;/br&gt; key_secret: notasecret #service account private key's password &lt;/br&gt; profileID: #ga:XXXXXXXX &lt;/br&gt; start: 3 years ago #Beginning of report &lt;/br&gt; end: now #End of report&lt;/br&gt; metric: ga:pageviews #Metric code &lt;/br&gt; segment: #All visits optional &lt;/br&gt; filters: #optional &lt;/br&gt; </code><p>service_account_email, key_file, and key_secret come from the Google API console when you set up your service account.<p>profileID is the specific report profile from which you want to pull data. Find it by going to the report page in Google Analytics. Look at the URL. It will look something like https://www.google.com/analytics/web/?hl=en&amp;pli=1#report/visitors-overview/###########p######/. The number after the p at the end of the URL is your profileID.<p>The start and end indicate the time range of data you want to query. They are parsed using Ruby’s Chronic gem, so you can include relative or absolute dates, such as now, yesterday, last month, 2 weeks ago. See Chronic’s documentation for more options.<p>The metric value is what you want to measure from your Google Analytics data. Usually this will be ga:pageviews or ga:visits, but it can be any metric available in Google Analytics. Specify only one. See the Google Analytics Query Explorer to experiment with different metrics. (Your dimension should always be ga:pagePath)<p>The segment and filters keys are optional parameters for your query. See the Google Analytics Query Explorer for a description of how to use them, or just leave them out.<p>The sort key can be true or false. If true, your posts will be sorted first by your Google Analytics metic, then chronologically as is the default. If false or not specified, your posts will sort as usual.<p>see more api usage. https://developers.google.com/analytics/devguides/reporting/<h2 id="step-4-fetch-data-and-generate-pages">Step 4. Fetch Data and Generate Pages</h2><p>As we all known, the github page only support the static pages, which means the page view count can only be generated at local and write into the generated html.<p>So <code> rake generate</code> will invoke this fechtin process in the pageview.rb written in ruby. You can read the code and add some debug code such as <code>p results</code> to print the request and the result in the console and to check whether the api request is right.<p>Here are some ways to check the rightness:<ol><li>GA API console(https://console.developers.google.com/project) will show the request and the count of the error<li>Your debug code or some threw out excpetion info<li>watch your arguments and check in https://developers.google.com/analytics/devguides/reporting/</ol></span><div id="page-meta" class="t30"><p>   <time class="icon-calendar pr20" datetime="2014-04-26" itemprop="datePublished"> 2014-04-26</time> <span class="icon-archive pr20"> TECH</span> <br /> <span class="pr20"></span><div id="post-nav" class="row"><div class="small-5 columns"><a class="button small radius prev" href="https://mlciv.com/blog/2013/12/14/octave-on-mac/">&laquo; Octave on Mac</a></div><div class="small-2 columns text-center"><a class="radius button small" href="https://mlciv.com/blog/archive/" title="Blog Archive">Archive</a></div><div class="small-5 columns text-right"><a class="button small radius next" href="https://mlciv.com/blog/2015/02/17/hadoop-distcp-secure2insecure_0.20.2/">hadoop distcp from secure to insecure 0.20.2 &raquo;</a></div></div></div><h3 id="comments" class="t60">Dialogue &amp; Discussion</h3><div id="disqus_thread"></div><script type="text/javascript"> /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */ var disqus_shortname = 'jcao'; var disqus_identifier = '/blog/2014/04/26/ga-for-octopress/'; /* * * DON'T EDIT BELOW THIS LINE * * */ (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></article></div></div><div id="up-to-top" class="row"><div class="small-12 columns" style="text-align: right;"> <a class="iconfont" href="#top-of-page">&#xf108;</a></div></div><footer id="footer-content" class="bg-grau"><div id="footer"><div class="row"><div class="medium-6 large-5 columns"><h5 class="shadow-black">About This Site</h5><p class="shadow-black"> Keep a student mindset, and learn for/with/from machines. -- machine learning civilization <a href="https://mlciv.com/info/">More ›</a></div><div class="small-6 medium-3 large-3 large-offset-1 columns"><h5 class="shadow-black">Services</h5><ul class="no-bullet shadow-black"><li > <a href="" title=""></a><li > <a href="/contact/" title="Contact">Contact</a><li > <a href="/feed.xml" title="Subscribe to RSS Feed">RSS</a><li > <a href="/atom.xml" title="Subscribe to Atom Feed">Atom</a><li > <a href="/sitemap.xml" title="Sitemap for Google Webmaster Tools">sitemap.xml</a></ul></div><div class="small-6 medium-3 large-3 columns"><h5 class="shadow-black">Related Links</h5><ul class="no-bullet shadow-black"><li > <a href="" title=""></a><li class="mlnlp" > <a href="http://nlp.cs.utah.edu/test" target="_blank" title="Utah NLP Group">Utah NLP Group</a></ul></div></div></div><div id="subfooter"><nav class="row"><section id="subfooter-left" class="b30 small-12 medium-6 columns credits"><p> <a href="http://phlow.de" alt="Theme created by Phlow"> Powered by Phlow</a></section><section id="subfooter-right" class="small-12 medium-6 columns social-icons"><ul class="inline-list"><li><a href="http://github.com/mlciv" target="_blank" class="icon-github" title=""></a><li><a href="http://twitter.com/ijiessie" target="_blank" class="icon-twitter" title=""></a><li><a href="https://www.linkedin.com/in/jiessie/" target="_blank" class="icon-linkedin" title=""></a><li><a href="mailto:jcao at cs dot utah dot edu" target="_blank" class="icon-mail" title=""></a></ul></section></nav></div></footer><script src="https://mlciv.com/assets/js/javascript.min.js"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-50404010-1', 'auto'); ga('set', 'anonymizeIp', true); ga('send', 'pageview'); </script>
